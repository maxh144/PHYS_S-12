<!DOCTYPE html>
<html lang="en">
<head>
  <title>PHYS S-12: Intro to Digital Fabrication </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> 
  <link href="../style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
</head>

<body>

<div class="flex-h">

    <div class="flex-c data-out">


        <h3 id="volt" class="data"> Voltage: NULL</h3>
        <h3 id="dist" class="data"> Distance: NULL</h3>
        <h3 id="speed" class="data"> Speed: NULL</h3>
        <h3 id="depth" class="data"> Depth: NULL</h3>
        <h3 id="span" class="data"> Span: NULL</h3>
        <h3 id="sat" class="data"> Satellites: NULL</h3>


    </div>

    <div>
        <img src="http://192.168.4.1:81/stream" class="img-responsive margin center stream">
    </div>

</div>

</body>

<script>

    let url = 'http://192.168.4.1/sensor';
    
    function updateVals(){
    fetch(url).then(function(response) {
        response.json().then(function(data) {


            document.getElementById('volt').innerHTML = "Voltage: " + data['Voltage'] / 100.0 + "v";
            document.getElementById('dist').innerHTML = "Distance: " + data['Distance'] / 100.0 + "cm";
            document.getElementById('speed').innerHTML = "Speed: " + data['Speed'] + "kph";
            document.getElementById('depth').innerHTML = "Depth: " + data['Altitude'] + "m";
            document.getElementById('span').innerHTML = "Span: " + data['DTH'] + "m";
            document.getElementById('sat').innerHTML = "Sats: " + data['Sats'];
            

        });
    });
}

setInterval(updateVals, 1000);


</script>

</html>

